Go çš„ `time` åŒ…æ˜¯å¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„æ ¸å¿ƒæ ‡å‡†åº“ï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”å®ç”¨ã€‚ä¸‹é¢æˆ‘ä¼šä¸ºä½ æ¢³ç†å®ƒçš„ä¸»è¦åŠŸèƒ½ã€å¸¸ç”¨å‡½æ•°ä»¥åŠä¸€äº›å®ç”¨æŠ€å·§ã€‚

# ğŸ• Go è¯­è¨€ time åŒ…è¯¦è§£

## âœ¨ æ ¸å¿ƒç±»å‹

åœ¨æ·±å…¥äº†è§£å‡½æ•°ä¹‹å‰ï¼Œå…ˆè®¤è¯†ä¸¤ä¸ªæ ¸å¿ƒç±»å‹ï¼š

-   **`time.Time`**ï¼šè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„æ—¶é—´ç‚¹ï¼ŒåŒ…å«æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼Œä»¥åŠæ—¶åŒºä½ç½®ï¼ˆLocationï¼‰ã€‚
-   **`time.Duration`**ï¼šè¡¨ç¤ºä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´ç»è¿‡çš„æ—¶é—´ï¼Œä»¥**çº³ç§’**ä¸ºå•ä½ã€‚å®ƒå®šä¹‰äº†ä¸€äº›å¸¸ç”¨æ—¶é—´æ®µçš„å¸¸é‡ï¼š
    ```go
    const (
        Nanosecond  Duration = 1
        Microsecond          = 1000 * Nanosecond
        Millisecond          = 1000 * Microsecond
        Second               = 1000 * Millisecond
        Minute               = 60 * Second
        Hour                 = 60 * Minute
    )
    ```

## ğŸ“… æ—¶é—´è·å–ä¸åˆ›å»º

ä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è·å–å’Œåˆ›å»º `time.Time` å¯¹è±¡ã€‚

| å‡½æ•°/æ–¹æ³•                                                      | è¯´æ˜                                                                 | ç¤ºä¾‹                                                                                          |
| :------------------------------------------------------------- | :------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------- |
| **`time.Now()`**                                               | è·å–å½“å‰æœ¬åœ°æ—¶é—´                                                 | `now := time.Now()`                                                                           |
| **`time.Date(year, month, day, hour, min, sec, nsec, loc)`**   | æ ¹æ®ç»™å®šçš„å¹´æœˆæ—¥ã€æ—¶åˆ†ç§’ã€çº³ç§’å’Œæ—¶åŒºä¿¡æ¯åˆ›å»ºä¸€ä¸ªæ—¶é—´å¯¹è±¡                 | `t := time.Date(2023, time.October, 22, 15, 0, 0, 0, time.Local)`                             |
| **`time.Unix(sec, nsec)`**                                     | å°† Unix æ—¶é—´æˆ³ï¼ˆè‡ª 1970-01-01 UTC èµ·çš„ç§’å’Œçº³ç§’ï¼‰è½¬æ¢ä¸º `time.Time` | `t := time.Unix(1597651200, 0)` // 2020-08-17 08:00:00 +0000 UTC                              |
| **`time.UnixMilli(msec)`**<br>**`time.UnixMicro(usec)`**        | å°†æ¯«ç§’æˆ–å¾®ç§’æ—¶é—´æˆ³è½¬æ¢ä¸º `time.Time` (Go 1.17+)                                  | `t := time.UnixMilli(1597651200000)`                                                          |
| **`time.Parse(layout, value)`**<br>**`time.ParseInLocation(layout, value, loc)`** | å°†å­—ç¬¦ä¸²è§£æä¸ºæ—¶é—´å¯¹è±¡ã€‚`Parse` é»˜è®¤ä½¿ç”¨ UTCï¼Œ`ParseInLocation` å¯æŒ‡å®šæ—¶åŒº | `t, err := time.Parse("2006-01-02", "2023-10-27")`<br>`t, err := time.ParseInLocation("2006-01-02", "2023-10-27", time.Local)` |

ğŸ’¡ **è·å–æ—¶é—´çš„å„éƒ¨åˆ†**ï¼šä» `time.Time` å¯¹è±¡ä¸­å¯ä»¥æå–å‡ºå¹´ã€æœˆã€æ—¥ç­‰ç»„æˆéƒ¨åˆ†ï¼š
```go
now := time.Now()
year := now.Year()     // å¹´ (int)
month := now.Month()   // æœˆ (time.Month)
day := now.Day()       // æ—¥ (int)
hour := now.Hour()     // æ—¶ (int)
minute := now.Minute() // åˆ† (int)
second := now.Second() // ç§’ (int)
nsec := now.Nanosecond() // çº³ç§’ (int)
weekday := now.Weekday() // æ˜ŸæœŸå‡  (time.Weekday)
```

## â° æ—¶é—´æ ¼å¼åŒ–ä¸è§£æ

Go è¯­è¨€çš„æ—¶é—´æ ¼å¼åŒ–é‡‡ç”¨ä¸€ä¸ª**ç‹¬ç‰¹çš„å‚è€ƒæ—¶é—´**ï¼š`Mon Jan 2 15:04:05 MST 2006`ï¼ˆå¯¹åº”æ•°å­—é¡ºåº 1, 2, 3, 4, 5, 6, 7ï¼‰ã€‚

### æ ¼å¼åŒ–æ—¶é—´ï¼ˆTime â†’ Stringï¼‰
ä½¿ç”¨ `time.Format(layout string)` æ–¹æ³•ã€‚
```go
now := time.Now()
fmt.Println(now.Format("2006-01-02 15:04:05")) // è¾“å‡º: 2023-10-27 10:30:00
fmt.Println(now.Format("2006/01/02"))          // è¾“å‡º: 2023/10/27
fmt.Println(now.Format("15:04:05"))            // è¾“å‡º: 10:30:00
fmt.Println(now.Format("2006å¹´01æœˆ02æ—¥ Monday")) // è¾“å‡º: 2023å¹´10æœˆ27æ—¥ Friday
// ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼åŒ–å¸¸é‡
fmt.Println(now.Format(time.RFC3339))          // è¾“å‡º: 2023-10-27T10:30:00+08:00
```

### è§£ææ—¶é—´ï¼ˆString â†’ Timeï¼‰
ä½¿ç”¨ `time.Parse(layout, value)` æˆ– `time.ParseInLocation(layout, value, loc)`ã€‚
```go
// æ³¨æ„ï¼štime.Parse è§£æçš„æ—¶é—´é»˜è®¤æ˜¯ UTC æ—¶åŒº
t, err := time.Parse("2006-01-02 15:04:05", "2023-10-27 10:30:00")
if err != nil {
    log.Fatal(err)
}
fmt.Println(t) // è¾“å‡º: 2023-10-27 10:30:00 +0000 UTC

// å¦‚æœéœ€è¦æŒ‡å®šæ—¶åŒºï¼Œä½¿ç”¨ ParseInLocation
t, err = time.ParseInLocation("2006-01-02 15:04:05", "2023-10-27 10:30:00", time.Local)
```

## â±ï¸ æ—¶é—´è¿ç®—ä¸æ¯”è¾ƒ

`time` åŒ…æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•è¿›è¡Œæ—¶é—´çš„åŠ å‡ã€æ¯”è¾ƒå’Œæ±‚æŒç»­æ—¶é—´ã€‚

| æ–¹æ³•                                        | è¯´æ˜                                                                                               | ç¤ºä¾‹                                                                                                      |
| :------------------------------------------ | :------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------- |
| **`t.Add(d Duration)`**                     | è¿”å›æ—¶é—´ `t` åŠ ä¸Šæ—¶é—´æ®µ `d` åçš„æ—¶é—´                                                                   | `later := now.Add(2 * time.Hour)`  // åŠ  2 å°æ—¶<br>`before := now.Add(-30 * time.Minute)`  // å‡ 30 åˆ†é’Ÿ     |
| **`t.AddDate(years, months, days int)`**    | è¿”å›æ—¶é—´ `t` åŠ ä¸Šç»™å®šå¹´ã€æœˆã€æ—¥åçš„æ—¶é—´ã€‚ **æ³¨æ„**ï¼šæœˆåŠ å‡æ—¶å¯èƒ½æ¶‰åŠå¤©æ•°å˜åŒ–ï¼ˆå¦‚ 3æœˆ31æ—¥ + 1æœˆ = 4æœˆ30æ—¥ï¼Ÿï¼‰ã€‚ | `nextMonth := now.AddDate(0, 1, 0)`  // åŠ  1 ä¸ªæœˆ                                                           |
| **`t.Sub(u Time)`**                         | è¿”å›ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„æ—¶é—´æ®µ `t - u` (Duration)                                            | `diff := later.Sub(now)`  // 2h0m0s                                                                      |
| **`t.Before(u Time)`**                      | åˆ¤æ–­æ—¶é—´ `t` æ˜¯å¦åœ¨æ—¶é—´ `u` ä¹‹å‰                                                                 | `isBefore := now.Before(later)`  // true                                                                 |
| **`t.After(u Time)`**                       | åˆ¤æ–­æ—¶é—´ `t` æ˜¯å¦åœ¨æ—¶é—´ `u` ä¹‹å                                                                  | `isAfter := now.After(later)`  // false                                                                  |
| **`t.Equal(u Time)`**                       | åˆ¤æ–­ä¸¤ä¸ªæ—¶é—´æ˜¯å¦ç›¸åŒã€‚ **æ¨è**ç”¨äºæ¯”è¾ƒæ—¶é—´ï¼Œå› ä¸ºå®ƒä¼šè€ƒè™‘æ—¶åŒºä¿¡æ¯ã€‚                                       | `isEqual := now.Equal(nowCopy)`  // true                                                                 |
| **`time.Since(t Time)`**                    | è¿”å›ä»æ—¶é—´ `t` åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ—¶é—´ (Duration)ï¼Œç­‰ä»·äº `time.Now().Sub(t)`                          | `elapsed := time.Since(startTime)`                                                                       |
| **`time.Until(t Time)`**                    | è¿”å›ä»ç°åœ¨åˆ°æ—¶é—´ `t` æ‰€å‰©ä½™çš„æ—¶é—´ (Duration)ï¼Œç­‰ä»·äº `t.Sub(time.Now())`                          | `remaining := time.Until(deadline)`                                                                      |

## âŒ› æŒç»­æ—¶é—´ (Duration) å¤„ç†

`time.Duration` ç±»å‹æ‹¥æœ‰ä¸€äº›æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸åŒæ—¶é—´å•ä½é—´è½¬æ¢å’Œè¾“å‡ºã€‚

```go
d := 2*time.Hour + 30*time.Minute // è¡¨ç¤º 2 å°æ—¶ 30 åˆ†é’Ÿ

fmt.Println(d.Hours())        // è¾“å‡º: 2.5 (å°æ—¶ï¼Œfloat64)
fmt.Println(d.Minutes())      // è¾“å‡º: 150 (åˆ†é’Ÿï¼Œfloat64)
fmt.Println(d.Seconds())      // è¾“å‡º: 9000 (ç§’ï¼Œfloat64)
fmt.Println(d.Milliseconds()) // è¾“å‡º: 9000000 (æ¯«ç§’ï¼Œint64)
fmt.Println(d.Microseconds()) // è¾“å‡º: 9000000000 (å¾®ç§’ï¼Œint64)
fmt.Println(d.Nanoseconds())  // è¾“å‡º: 9000000000000 (çº³ç§’ï¼Œint64)
fmt.Println(d.String())       // è¾“å‡º: 2h30m0s (å­—ç¬¦ä¸²è¡¨ç¤º)
```

ä½ ä¹Ÿå¯ä»¥å°†å­—ç¬¦ä¸²è§£æä¸º Durationï¼š
```go
d, err := time.ParseDuration("1h30m")
if err != nil {
    log.Fatal(err)
}
fmt.Println(d) // è¾“å‡º: 1h30m0s
```

## ğŸ”” å®šæ—¶å™¨ä¸æ–­ç»­å™¨ (Timer & Ticker)

`time` åŒ…æä¾›äº†ç”¨äºå®šæ—¶å’Œå‘¨æœŸæ€§ä»»åŠ¡çš„å·¥å…·ã€‚

| ç±»å‹/å‡½æ•°                                      | è¯´æ˜                                                                                               | ç¤ºä¾‹ä¸æ³¨æ„äº‹é¡¹                                                                                                                              |
| :--------------------------------------------- | :------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------- |
| **`time.Timer`**                               | è¡¨ç¤ºä¸€ä¸ªå•æ¬¡å®šæ—¶äº‹ä»¶ã€‚åœ¨æŒ‡å®šçš„æ—¶é—´è¿‡åï¼Œä¼šå‘å…¶é€šé“ `C` å‘é€å½“å‰æ—¶é—´ã€‚                                   | ```timer := time.NewTimer(2 * time.Second)<br><-timer.C // é˜»å¡ 2 ç§’<br>fmt.Println("Timer fired!")```                                     |
| **`time.After(d Duration)`**                   | è¿”å›ä¸€ä¸ªé€šé“ï¼Œåœ¨æŒ‡å®šæ—¶é—´åä¼šæ¥æ”¶åˆ°ä¸€ä¸ªæ—¶é—´å€¼ã€‚é€‚ç”¨äºç®€å•çš„è¶…æ—¶ç­‰å¾…ã€‚                                                | ```select {<br>case <-time.After(2 * time.Second):<br>    fmt.Println("Timeout!")<br>case <-otherChan:<br>    // ...<br>}``` |
| **`time.AfterFunc(d Duration, f func())`**     | ç­‰å¾…æŒç»­æ—¶é—´ `d`ï¼Œç„¶ååœ¨**è‡ªå·±çš„ goroutine** ä¸­è°ƒç”¨å‡½æ•° `f`ã€‚ è¿”å›çš„ `Timer` å¯ç”¨äºåœæ­¢è°ƒç”¨ã€‚                      | ```timer := time.AfterFunc(1*time.Second, func() {<br>    fmt.Println("This runs after 1 second")<br>})<br>// ...<br>// timer.Stop() // å¿…è¦æ—¶å¯åœæ­¢``` |
| **`time.Ticker`**                              | è¡¨ç¤ºä¸€ä¸ªå‘¨æœŸæ€§å®šæ—¶å™¨ï¼Œä¼šæ¯éš”ä¸€æ®µæ—¶é—´å°±å‘å…¶é€šé“ `C` å‘é€å½“å‰æ—¶é—´ã€‚                                     | ```ticker := time.NewTicker(1 * time.Second)<br>for t := range ticker.C {<br>    fmt.Println("Tick at", t) // æ¯ç§’æ‰“å°ä¸€æ¬¡<br>}```           |
| **`time.Tick(d Duration)`**                    | è¿”å›ä¸€ä¸ªé€šé“ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å°±ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªæ—¶é—´å€¼ã€‚ **æ³¨æ„**ï¼šå®ƒé€‚ç”¨äºæ•´ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½éœ€è¦ tick çš„æƒ…å†µï¼Œä¸”**æ— æ³•å…³é—­**ï¼Œå¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼ã€‚ | ```for t := range time.Tick(1 * time.Second) {<br>    fmt.Println("Tick at", t) // æ¯ç§’æ‰“å°ä¸€æ¬¡<br>}```                                     |

### åœæ­¢ä¸é‡ç½®

-   **`ticker.Stop()`**ï¼šåœæ­¢ä¸€ä¸ª Tickerã€‚
-   **`timer.Stop() bool`**ï¼šåœæ­¢ä¸€ä¸ª Timerã€‚å¦‚æœ Timer å·²è¿‡æœŸæˆ–å·²åœæ­¢ï¼Œè¿”å› `false`ï¼Œå¦åˆ™è¿”å› `true`ã€‚
-   **`timer.Reset(d Duration) bool`**ï¼šé‡ç½® Timer ä½¿å…¶åœ¨æŒç»­æ—¶é—´ `d` åå†æ¬¡è§¦å‘ã€‚**Reset å‰åº”ç¡®ä¿ Timer å·²åœæ­¢æˆ–é€šé“å·²æ’ç©º**ã€‚

**æ­£ç¡®åœæ­¢ Timer çš„ç¤ºä¾‹**ï¼š
```go
timer := time.NewTimer(2 * time.Second)
// ... å¯èƒ½çš„æƒ…å†µæ˜¯ timer åœ¨åœæ­¢å‰å°±è§¦å‘äº†
if !timer.Stop() {
    // æ’ç©ºé€šé“ï¼Œé˜²æ­¢ Reset åç«‹å³è§¦å‘
    select {
    case <-timer.C: // å°è¯•ä»é€šé“ä¸­å–å‡ºå€¼
    default:        // å¦‚æœé€šé“å·²ç»æ˜¯ç©ºçš„ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åš
    }
}
timer.Reset(2 * time.Second) // ç°åœ¨å¯ä»¥å®‰å…¨åœ°é‡ç½®
```

## ğŸŒ æ—¶åŒºå¤„ç† (Location)

`time.Time` å¯¹è±¡é€šå¸¸ä¸ä¸€ä¸ªæ—¶åŒºï¼ˆLocationï¼‰å…³è”ã€‚

| å‡½æ•°/æ–¹æ³•                                  | è¯´æ˜                                                                 | ç¤ºä¾‹                                                                                              |
| :----------------------------------------- | :------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------ |
| **`time.LoadLocation(name string)`**       | åŠ è½½æŒ‡å®šåç§°çš„æ—¶åŒºã€‚                                           | `loc, err := time.LoadLocation("America/New_York")`<br>`loc, err := time.LoadLocation("Local")` // æœ¬åœ°æ—¶åŒº<br>`loc, err := time.LoadLocation("UTC")`   |
| **`time.FixedZone(name string, offset int)`** | åˆ›å»ºä¸€ä¸ªå›ºå®šåç§»é‡çš„æ—¶åŒºã€‚ `offset` æ˜¯ç›¸å¯¹äº UTC çš„ç§’æ•°ã€‚                 | `loc := time.FixedZone("CST", int(8*time.Hour.Seconds()))` // UTC+8                               |
| **`t.In(loc *Location)`**                  | å°†æ—¶é—´ `t` è½¬æ¢ä¸ºæŒ‡å®šæ—¶åŒºçš„æ—¶é—´ã€‚                               | `nyTime := now.In(nyLoc)`                                                                         |
| **`t.UTC()`**                              | å°†æ—¶é—´ `t` è½¬æ¢ä¸º UTC æ—¶åŒºã€‚                                              | `utcTime := now.UTC()`                                                                            |
| **`t.Location()`**                         | è¿”å›æ—¶é—´ `t` çš„æ—¶åŒºä¿¡æ¯ã€‚                                                 | `loc := now.Location()`                                                                           |
| **`t.Zone()`**                             | è¿”å›æ—¶é—´ `t` çš„æ—¶åŒºç¼©å†™ï¼ˆå¦‚ "CST"ï¼‰å’Œç›¸å¯¹äº UTC çš„ç§’æ•°åç§»ã€‚                | `name, offset := now.Zone()`                                                                      |

## ğŸ’¡ å®ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹

1.  **æ—¶é—´æ¯”è¾ƒ**ï¼šæ¯”è¾ƒä¸¤ä¸ª `time.Time` å¯¹è±¡æ—¶ï¼Œ**æ¨èä½¿ç”¨ `t.Equal(u)`** è€Œä¸æ˜¯ `==`ï¼Œå› ä¸º `==` è¿˜ä¼šæ¯”è¾ƒæ—¶åŒºç­‰ä¿¡æ¯ï¼Œæœ‰æ—¶å¯èƒ½å› ä¸ºåº•å±‚å†…å­˜å¸ƒå±€ä¸åŒè€Œäº§ç”Ÿæ„å¤–ç»“æœã€‚
2.  **æ€§èƒ½æ•æ„Ÿåœºæ™¯**ï¼šåœ¨å¾ªç¯æˆ–æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­**é¿å…é¢‘ç¹è°ƒç”¨ `time.Now()`**ï¼Œå¯ä»¥è€ƒè™‘ç¼“å­˜ç»“æœã€‚
3.  **å®šæ—¶å™¨æ³„æ¼**ï¼šè°¨æ…ä½¿ç”¨ `time.Tick()`ï¼Œå› ä¸ºå®ƒè¿”å›çš„ Ticker æ— æ³•åœæ­¢ï¼Œå¦‚æœåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨å¯èƒ½å¯¼è‡´èµ„æºæ— æ³•å›æ”¶ã€‚åœ¨éœ€è¦åœæ­¢å®šæ—¶å™¨çš„åœºæ™¯ï¼Œ**ä¼˜å…ˆä½¿ç”¨ `time.NewTicker()` å¹¶é€šè¿‡ `Stop()` æ–¹æ³•æ˜¾å¼åœæ­¢**ã€‚
4.  **è§£ææ ¼å¼å­—ç¬¦ä¸²**ï¼šåŠ¡å¿…ä½¿ç”¨ Go çš„å‚è€ƒæ—¶é—´ `Mon Jan 2 15:04:05 MST 2006` çš„å¸ƒå±€æ¥å®šä¹‰ä½ çš„æ ¼å¼å­—ç¬¦ä¸²ã€‚
5.  **æ—¶åŒºæ„è¯†**ï¼šå¤„ç†æ—¶é—´æ—¶**å§‹ç»ˆæ³¨æ„æ—¶åŒºé—®é¢˜**ã€‚è§£æå­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šæ—¶åŒºï¼ˆ`time.Parse`ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨ UTCï¼›æŒ‡å®šæ—¶åŒºè¯·ç”¨ `time.ParseInLocation` æˆ–è§£æåä½¿ç”¨ `In()` æ–¹æ³•è½¬æ¢ã€‚
6.  **Duration çš„å•ä½**ï¼š`time.Duration` çš„æœ¬è´¨æ˜¯çº³ç§’æ•°ï¼Œè¿›è¡Œè¿ç®—å’Œæ¯”è¾ƒæ—¶è¦æ³¨æ„å•ä½ã€‚
7.  **å®šæ—¶å™¨çš„åœæ­¢ä¸é‡ç½®**ï¼šæ“ä½œ Timer çš„ `Stop` å’Œ `Reset` æ–¹æ³•æ—¶ï¼ŒåŠ¡å¿…æ³¨æ„æ–‡æ¡£è¯´æ˜çš„æ¡ä»¶ï¼Œç¡®ä¿é€šé“å·²è¢«é€‚å½“å¤„ç†ï¼Œä»¥å…å‡ºç°é˜»å¡æˆ–ç«‹å³è§¦å‘çš„é—®é¢˜ã€‚

`time` åŒ…æ˜¯ Go ç¨‹åºå‘˜å¤„ç†æ—¶é—´ç›¸å…³ä»»åŠ¡çš„åˆ©å™¨ï¼ŒèŠ±æ—¶é—´ç†Ÿæ‚‰å®ƒçš„è¿™äº›å‡½æ•°å’Œç‰¹æ€§ï¼Œä¼šè®©ä½ çš„ç¨‹åºæ›´åŠ ç¨³å¥å’Œé«˜æ•ˆã€‚